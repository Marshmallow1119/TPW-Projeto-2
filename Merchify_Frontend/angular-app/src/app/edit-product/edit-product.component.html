<div class="container mt-5" style="margin-bottom: 60px">
  <h2 class="text-center mb-4">Editar Produto</h2>
  <div class="card shadow-sm p-4">
    <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
      <!-- Product Type and Artist -->
      <div class="row mb-3">
        <div class="col-md-6">
          <label for="productType" class="form-label">Tipo de Produto</label>
          <select 
            class="form-select" 
            formControlName="productType" 
            id="productType" 
            (change)="onProductTypeChange($event)"
            aria-disabled="true">
            <option *ngFor="let type of productTypes" [value]="type">{{ type | titlecase }}</option>
          </select>
        </div>

        <div class="col-md-6">
          <label for="artist" class="form-label">Artista</label>
          <input type="text" class="form-control" formControlName="artist" [attr.disabled]="'true'" />
        </div>
      </div>

      <!-- Product Name -->
      <div class="mb-3">
        <label for="name" class="form-label">Nome do Produto</label>
        <input type="text" class="form-control" formControlName="name" />
      </div>

      <div class="mb-3">
        <label for="price" class="form-label">Preço (€)</label>
        <input type="text" class="form-control" formControlName="price" />
      </div>

      <div class="row mb-3">
        
        <div class="col-md-6">
          <label for="description" class="form-label">Descrição</label>
          <textarea class="form-control" formControlName="description" style="height: 200px;"></textarea>
        </div>

        <div class="col-md-6">
          <label for="image" class="form-label">Imagem do Produto</label>
          <!-- Preview Image -->
          <div class="mb-2">
            <img 
              *ngIf="imagePreview" 
              [src]="imagePreview" 
              alt="Imagem atual" 
              class="img-thumbnail" 
              style="max-height: 200px; width: auto;"
            />
          </div>
          <!-- File Input -->
          <input 
            type="file" 
            class="form-control" 
            id="image" 
            (change)="onImageChange($event)"
          />
        </div>
        
      </div>

      <!-- Vinyl Details -->
      <div *ngIf="productForm.get('vinil')?.enabled && productForm.value.productType === 'vinil'" 
          class="card p-4 mb-4 shadow-sm" 
          formGroupName="vinil">
        <h5>Detalhes do Vinil</h5>
        <div class="row">
          <div class="col-md-4">
            <label for="genre" class="form-label">Gênero</label>
            <input type="text" formControlName="genre" class="form-control" />
          </div>
          <div class="col-md-4">
            <label for="lpSize" class="form-label">Tamanho do LP</label>
            <input type="text" formControlName="lpSize" class="form-control" />
          </div>
          <div class="col-md-4">
            <label for="releaseDate" class="form-label">Data de Lançamento</label>
            <input type="date" formControlName="releaseDate" class="form-control" />
          </div>
        </div>
      </div>

      <!-- CD Details -->
      <div *ngIf="productForm.get('cd')?.enabled && productForm.value.productType === 'cd'" 
          class="card p-4 mb-4 shadow-sm" 
          formGroupName="cd">
        <h5>Detalhes do CD</h5>
        <div class="row">
          <div class="col-md-4">
            <label for="genre" class="form-label">Gênero</label>
            <input type="text" formControlName="genre" class="form-control" />
          </div>
          <div class="col-md-4">
            <label for="releaseDate" class="form-label">Data de Lançamento</label>
            <input type="date" formControlName="releaseDate" class="form-control" />
          </div>
        </div>
      </div>

      <!-- Clothing Details -->
      <div *ngIf="productForm.get('clothing')?.enabled && productForm.value.productType === 'clothing'" 
          class="card p-4 mb-4 shadow-sm" 
          formGroupName="clothing">
        <h5>Detalhes da Roupa</h5>
        <div class="mb-3">
          <label for="color" class="form-label">Cor</label>
          <input type="text" class="form-control" formControlName="color" />
        </div>
      </div>

      <!-- Accessory Details -->
      <div *ngIf="productForm.get('accessory')?.enabled && productForm.value.productType === 'accessory'" 
          class="card p-4 mb-4 shadow-sm" 
          formGroupName="accessory">
        <h5>Detalhes de 'Outros'</h5>
        <div class="row">
          <div class="col-md-4">
            <label for="material" class="form-label">Material</label>
            <input type="text" class="form-control" formControlName="material" />
          </div>
          <div class="col-md-4">
            <label for="color" class="form-label">Cor</label>
            <input type="text" class="form-control" formControlName="color" />
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="d-flex justify-content-center mt-4">
        <button type="submit" style="width: 100%" class="btn btn-success me-2">Guardar Alterações</button>
      </div>
    </form>
  </div>
</div>
