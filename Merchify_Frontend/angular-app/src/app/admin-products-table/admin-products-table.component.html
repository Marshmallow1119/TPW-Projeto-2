<div id="product-section" class="content-table">
    <div *ngIf="errorMessage" class="alert alert-danger">
      {{ errorMessage }}
    </div>
    <div *ngIf="products.length > 0; else noProducts">
      <table class="table">
        <thead>
          <tr>
            <th>Imagem</th>
            <th>Nome</th>
            <th>Preço</th>
            <th>Categoria</th>
            <th>Detalhes</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let product of products">
            <td>
              <img
                [src]="product.image || '/media/default-product.png'"
                [alt]="product.name"
                class="product-image"
              />
            </td>
            <td>{{ product.name }}</td>
            <td>{{ product.price }}€</td>
            <td>{{ product.category }}</td>
            <td>
              <div *ngIf="isVinil(product)">
                Genre: {{ product.specific_details.genre }} <br />
                LP Size: {{ product.specific_details.lpSize }} <br />
                Release Date: {{ product.specific_details.releaseDate }}
              </div>
              <div *ngIf="isCD(product)">
                Genre: {{ product.genre }} <br />
                Release Date: {{ product.releaseDate }}
              </div>
              <div *ngIf="isClothing(product)">
                Color: {{ product.specific_details.color }} <br />
                Sizes:
                <span *ngFor="let size of product.sizes">{{ size.size }}</span>
              </div>
              <div *ngIf="isAccessory(product)">
                Material: {{ product.specific_details.material }} <br />
                Color: {{ product.specific_details.color }} <br />
                Size: {{ product.specific_details.size }}
              </div>
            </td>
            <td>
              <button
                class="btn btn-primary btn-sm"
              >
                Editar
              </button>
              <button
                class="btn btn-danger btn-sm"
                (click) = "openDeleteModal(product)">
                Apagar
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <ng-template #noProducts>
      <p>No products found.</p>
    </ng-template>
  </div>
  

  <app-delete-product-modal
  *ngIf="selectedProduct"
  [productName]="selectedProduct.name"
  [productId]="selectedProduct.id"
  (confirmDelete)="onConfirmDelete($event)"
  (closeModal)="closeDeleteModal()"
></app-delete-product-modal>
